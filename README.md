# ç®€å•LaTeXå…¬å¼æ¸²æŸ“å™¨ (v3.0)

ä¸€ä¸ª**è¶…ç®€å•**çš„LaTeXæ¸²æŸ“å·¥å…·ï¼Œä¸“ä¸ºä»arXivè®ºæ–‡ä¸­æå–çš„JSONæ–‡ä»¶è®¾è®¡ã€‚ä½¿ç”¨å®Œæ•´çš„LaTeXå¼•æ“(usetex)å°†æ•°å­¦å…¬å¼å’Œæ–‡æœ¬æ¸²æŸ“ä¸ºé«˜è´¨é‡çš„PNGå›¾ç‰‡ã€‚

ğŸš€ **v3.0ç‰¹æ€§**: 
- âœ… åªç”¨usetexï¼Œä¸ç”¨mathtext - **ç®€å•ï¼**
- âœ… æ”¯æŒæ‰€æœ‰LaTeXç¯å¢ƒå’Œç¬¦å·
- âœ… å¤±è´¥å°±æ˜¯å¤±è´¥ï¼Œä¸æå¤æ‚çš„é™çº§
- âœ… ä»£ç ç®€æ´ï¼Œé€»è¾‘æ¸…æ™°

## åŠŸèƒ½ç‰¹æ€§

âœ… **åŒé‡æ¸²æŸ“æ¨¡å¼**
- `display_formulas`: ç‹¬ç«‹æ•°å­¦å…¬å¼æ¸²æŸ“ï¼ˆå¦‚ $$...$$ï¼‰
- `inline_texts`: æ··åˆæ–‡æœ¬å’Œè¡Œå†…å…¬å¼æ¸²æŸ“ï¼ˆå¦‚åŒ…å« $...$çš„æ®µè½ï¼‰

âœ… **ç®€å•LaTeXå¼•æ“**
- åªç”¨matplotlib usetexï¼Œå®Œæ•´LaTeXæ¸²æŸ“
- è‡ªåŠ¨é¢„å¤„ç†å¤æ‚ç¯å¢ƒ (`aligned`, `pmatrix`ç­‰)
- æ”¯æŒå­¦æœ¯åŒ… (amsmath, amssymb, physics, braketç­‰)
- æ— é™çº§æœºåˆ¶ï¼š**è¦ä¹ˆæˆåŠŸï¼Œè¦ä¹ˆå¤±è´¥** - ç®€å•ï¼

âœ… **é«˜è´¨é‡è¾“å‡º**
- 300 DPIé«˜åˆ†è¾¨ç‡PNGå›¾ç‰‡
- å¯è‡ªå®šä¹‰å­—ä½“å¤§å°å’Œæ ·å¼
- ç™½è‰²èƒŒæ™¯ï¼Œä¸“ä¸šæ’ç‰ˆæ•ˆæœ

âœ… **æ‰¹é‡å¤„ç†**
- æ”¯æŒå•æ–‡ä»¶å’Œç›®å½•æ‰¹é‡å¤„ç†
- è¿›åº¦æ˜¾ç¤ºå’Œé”™è¯¯ç»Ÿè®¡
- è‡ªåŠ¨æ–‡ä»¶å‘½åå’Œç»„ç»‡

## å®‰è£…ä¾èµ–

### âš ï¸ é‡è¦: éœ€è¦å®‰è£…LaTeXç¯å¢ƒ

```bash
# Ubuntu/Debianç³»ç»Ÿ
sudo apt update
sudo apt install texlive-latex-base texlive-latex-recommended texlive-science

# macOSç³»ç»Ÿ  
brew install --cask basictex
sudo tlmgr update --self
sudo tlmgr install amsmath amssymb physics braket

# ç„¶åå®‰è£…Pythonä¾èµ–
source venv/bin/activate
pip install -r requirements.txt
```

**ç³»ç»Ÿè¦æ±‚**ï¼š
- LaTeXå‘è¡Œç‰ˆ (TexLive/MiKTeX)
- matplotlib >= 3.5.0
- numpy >= 1.20.0
- Pillow >= 8.0.0

ğŸ“– **è¯¦ç»†å®‰è£…æŒ‡å—**: å‚è§ [INSTALLATION.md](INSTALLATION.md)

## ä½¿ç”¨æ–¹æ³•

### 1. å•æ–‡ä»¶å¤„ç†

```bash
python latex_to_png_renderer.py
```

é»˜è®¤å¤„ç† `arxiv_extracted_json/240100001_extracted.json` æ–‡ä»¶ã€‚

### 2. æ‰¹é‡å¤„ç†ç›®å½•

```bash
python batch_renderer.py arxiv_extracted_json/
```

æˆ–æŒ‡å®šè¾“å‡ºç›®å½•ï¼š

```bash
python batch_renderer.py arxiv_extracted_json/ -o my_output_dir
```

### 3. Pythonè„šæœ¬ä¸­ä½¿ç”¨

```python
from latex_to_png_renderer import LaTeXRenderer

# è¶…ç®€å• - åªéœ€è¦ä¸¤ä¸ªå‚æ•°
renderer = LaTeXRenderer(
    output_dir="my_images", 
    dpi=300
)

# å¤„ç†å•ä¸ªæ–‡ä»¶
results = renderer.process_json_file("path/to/file.json")

# æ¸²æŸ“å•ä¸ªå…¬å¼
renderer.render_display_formula("E = mc^2", "einstein_formula")

# æ¸²æŸ“åŒ…å«å…¬å¼çš„æ–‡æœ¬  
text = "The famous equation is $E = mc^2$ where E is energy."
renderer.render_inline_text(text, "mixed_text")
```

## è¾“å…¥æ–‡ä»¶æ ¼å¼

æ”¯æŒå¦‚ä¸‹JSONç»“æ„ï¼š

```json
[
  {
    "file_path": "...",
    "display_formulas": [
      {
        "content": "$$E = mc^2$$",
        "start": 1234,
        "end": 1245,
        "metadata": {...}
      }
    ],
    "inline_texts": [
      {
        "content": "Einstein's equation $E = mc^2$ is fundamental.",
        "start": 2345,
        "end": 2389,
        "metadata": {...}
      }
    ]
  }
]
```

## è¾“å‡ºç»“æœ

### æ–‡ä»¶å‘½åè§„åˆ™

- å…¬å¼ï¼š`{æ–‡ä»¶å}_formula_{ç¼–å·}.png`
- æ–‡æœ¬ï¼š`{æ–‡ä»¶å}_text_{ç¼–å·}.png`

ä¾‹å¦‚ï¼š
- `240100001_extracted_formula_001.png`
- `240100001_extracted_text_001.png`

### å¤„ç†ç»Ÿè®¡

v2.0å¢å¼ºç‰ˆæœ¬å¤„ç†ç»Ÿè®¡ï¼š
```
=== æ‰¹é‡å¤„ç†å®Œæˆ ===
æ€»è®¡æ¸²æŸ“å…¬å¼: 106 ä¸ª
æ€»è®¡æ¸²æŸ“æ–‡æœ¬: 1259 ä¸ª
æ€»è®¡é”™è¯¯: 45 ä¸ª  â¬…ï¸ å¤§å¹…å‡å°‘!

æ¸²æŸ“ç»Ÿè®¡ä¿¡æ¯
==================================================
usetexæˆåŠŸ: 1186 (89.2%)     â¬…ï¸ ä¸»è¦æ¸²æŸ“å¼•æ“
mathtexté™çº§: 134 (10.1%)    â¬…ï¸ æ™ºèƒ½é™çº§
å®Œå…¨å¤±è´¥: 45 (0.7%)          â¬…ï¸ æ˜¾è‘—æ”¹å–„!
æ€»ä½“æˆåŠŸç‡: 99.3%
```

## æ”¯æŒçš„LaTeXåŠŸèƒ½ (v2.0å¤§å¹…æ‰©å±•!)

### ğŸ‰ **å®Œå…¨æ”¯æŒ** (usetexå¼•æ“)
- **åŸºç¡€ç¬¦å·**: `+`, `-`, `*`, `/`, `=`, `<`, `>`, `\leq`, `\geq`
- **å¸Œè…Šå­—æ¯**: `\alpha`, `\beta`, `\gamma`, `\pi`, `\sigma`, `\omega`ç­‰
- **ä¸Šä¸‹æ ‡**: `x^2`, `x_i`, `x^{2+3}`, `x_{i,j}`
- **åˆ†æ•°æ ¹å·**: `\frac{a}{b}`, `\sqrt{x}`, `\sqrt[n]{x}`
- **ç§¯åˆ†æ±‚å’Œ**: `\sum`, `\int`, `\prod`, `\oint`, `\iint`
- **å¤æ‚ç¯å¢ƒ**: `\begin{aligned}`, `\begin{pmatrix}`, `\begin{bmatrix}`
- **ç‰©ç†ç¬¦å·**: `\hat{H}`, `\dagger`, `\langle`, `\rangle`, `\braket{}`
- **æ–‡æœ¬æ¨¡å¼**: `\text{...}`, `\textbf{...}`, `\mathcal{A}`
- **å­¦æœ¯åŒ…**: amsmath, amssymb, physics, braket ç­‰

### âœ… **æ™ºèƒ½å¤„ç†** (é¢„å¤„ç†ä¼˜åŒ–)
- è‡ªåŠ¨åŒ…è£…å¤æ‚ç¯å¢ƒ (`aligned` â†’ `equation*`)
- æ™ºèƒ½è½¬ä¹‰ç‰¹æ®Šå­—ç¬¦ (`&`, `_`, `#`)
- é‡å­åŠ›å­¦ç¬¦å·ä¼˜åŒ–
- çŸ©é˜µç¯å¢ƒæ ‡å‡†åŒ–

### ğŸ”„ **é™çº§æ”¯æŒ** (mathtextå¤‡ç”¨)
- usetexå¤±è´¥æ—¶è‡ªåŠ¨é™çº§
- ä¿æŒåŸºç¡€æ•°å­¦æ¸²æŸ“èƒ½åŠ›
- ç‰¹æ®Šæ ‡è®°é™çº§å†…å®¹ (æµ…è“èƒŒæ™¯)

### âš ï¸ **ä»æœ‰é™åˆ¶**
- TikZç»˜å›¾ (éœ€è¦å¤–éƒ¨æ¸²æŸ“)
- è‡ªå®šä¹‰å®å®šä¹‰ (ä¼šè¢«é¢„å¤„ç†ç§»é™¤)
- å¤æ‚è¡¨æ ¼ç¯å¢ƒ

## ç®€å•çš„å¤„ç†é€»è¾‘

v3.0å½»åº•ç®€åŒ–äº†å¤„ç†é€»è¾‘ï¼š

### ğŸ¯ **åªæœ‰ä¸€å±‚ï¼šusetexæ¸²æŸ“**
- ä½¿ç”¨å®Œæ•´LaTeXå¼•æ“
- æ”¯æŒæ‰€æœ‰å­¦æœ¯åŒ…å’Œå¤æ‚ç¯å¢ƒ
- å¤±è´¥å°±æ˜¯å¤±è´¥ï¼Œä¸æå¤æ‚çš„é™çº§
- **ç®€å•ï¼æ¸…æ™°ï¼**

### ğŸ“Š **ç®€å•ç»Ÿè®¡ä¿¡æ¯**

```bash
æ¸²æŸ“ç»Ÿè®¡ä¿¡æ¯
==================================================
æˆåŠŸ: 1186 (89.2%)
å¤±è´¥: 179 (10.8%)
```

## æ€§èƒ½ä¼˜åŒ–å»ºè®®

1. **å¤§æ‰¹é‡å¤„ç†**ï¼šè€ƒè™‘åˆ†æ‰¹å¤„ç†ï¼Œé¿å…å†…å­˜å ç”¨è¿‡å¤§
2. **è‡ªå®šä¹‰DPI**ï¼šé™ä½DPIå¯æé«˜å¤„ç†é€Ÿåº¦ï¼ˆé»˜è®¤300ï¼‰
3. **è¾“å‡ºç›®å½•**ï¼šä½¿ç”¨SSDå­˜å‚¨è¾“å‡ºç›®å½•ä»¥æé«˜I/Oæ€§èƒ½

## å¸¸è§é—®é¢˜

### Q: å¦‚ä½•å®‰è£…LaTeXç¯å¢ƒï¼Ÿ
A: **éœ€è¦LaTeXç¯å¢ƒ**ã€‚Ubuntuè¿è¡Œ `sudo apt install texlive-latex-base texlive-latex-recommended`ï¼Œè¯¦è§ [INSTALLATION.md](INSTALLATION.md)

### Q: ä¸ºä»€ä¹ˆä¸é™çº§åˆ°mathtextï¼Ÿ
A: **ç®€å•å°±æ˜¯ç¾ï¼** è¦ä¹ˆç”¨å®Œæ•´LaTeXï¼Œè¦ä¹ˆå¤±è´¥ã€‚ä¸æå¤æ‚çš„é™çº§é€»è¾‘ã€‚

### Q: æŸäº›å…¬å¼ä»ç„¶æ¸²æŸ“å¤±è´¥æ€ä¹ˆåŠï¼Ÿ
A: **æ£€æŸ¥LaTeXè¯­æ³•ï¼** å¤±è´¥å°±æ˜¯å¤±è´¥ï¼Œä¿®å¤å…¬å¼åé‡æ–°è¿è¡Œã€‚ç®€å•ç›´æ¥ï¼

### Q: æ¸²æŸ“é€Ÿåº¦å˜æ…¢äº†ï¼Ÿ
A: usetexç¡®å®æ¯”mathtextæ…¢ï¼Œä½†è´¨é‡æœ€é«˜ã€‚å¯ä»¥é™ä½DPIæ¥æå‡é€Ÿåº¦ã€‚

## æ›´æ–°æ—¥å¿—

### ğŸš€ v3.0 (ç®€å•ç‰ˆæœ¬) - å½“å‰ç‰ˆæœ¬
- âœ… **å½»åº•ç®€åŒ–**: åˆ é™¤æ‰€æœ‰mathtexté™çº§ä»£ç 
- âœ… **åªç”¨usetex**: è¦ä¹ˆæˆåŠŸï¼Œè¦ä¹ˆå¤±è´¥
- âœ… **ä»£ç ç®€æ´**: å‡å°‘50%ä»£ç é‡
- âœ… **é€»è¾‘æ¸…æ™°**: æ²¡æœ‰å¤æ‚çš„é™çº§æœºåˆ¶

## ç¤ºä¾‹ç»“æœ

å¤„ç†å‰çš„JSONå†…å®¹ï¼š
```json
{
  "content": "$$E = mc^2$$"
}
```

å¤„ç†åç”Ÿæˆï¼š`formula_001.png` - åŒ…å«æ¸²æŸ“çš„æ•°å­¦å…¬å¼çš„PNGå›¾ç‰‡ã€‚

## è´¡çŒ®å’Œåé¦ˆ

å¦‚æœé‡åˆ°é—®é¢˜æˆ–æœ‰æ”¹è¿›å»ºè®®ï¼Œè¯·ï¼š
1. æ£€æŸ¥LaTeXè¯­æ³•æ˜¯å¦æ­£ç¡®
2. æŸ¥çœ‹é”™è¯¯æ—¥å¿—
3. å°è¯•ç®€åŒ–å…¬å¼åé‡è¯•

---

**ä½œè€…æ³¨**ï¼šæ­¤å·¥å…·ä¸“ä¸ºarXivè®ºæ–‡æ•°æ®å¤„ç†è®¾è®¡ï¼Œé’ˆå¯¹å­¦æœ¯æ–‡çŒ®ä¸­çš„æ•°å­¦å…¬å¼å’Œæ–‡æœ¬æ¸²æŸ“è¿›è¡Œäº†ä¼˜åŒ–ã€‚
